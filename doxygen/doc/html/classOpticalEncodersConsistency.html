<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icub-test: OpticalEncodersConsistency Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icub-test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OpticalEncodersConsistency Class Reference<div class="ingroups"><a class="el" href="group__icub-tests.html">A list of available tests</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This tests checks if the motor encoder reading are consistent with the joint encoder readings.  
 <a href="classOpticalEncodersConsistency.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="motorEncodersConsistency_8h_source.html">motorEncodersConsistency.h</a>&gt;</code></p>

<p>Inherits YarpTestCase.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a51df63f87479ffa4f2f05c99f9c06863"><td class="memItemLeft" align="right" valign="top"><a id="a51df63f87479ffa4f2f05c99f9c06863"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>setup</b> (yarp::os::Property &amp;property)</td></tr>
<tr class="separator:a51df63f87479ffa4f2f05c99f9c06863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8751028fa2a3bb23acc51693f47a9b75"><td class="memItemLeft" align="right" valign="top"><a id="a8751028fa2a3bb23acc51693f47a9b75"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>tearDown</b> ()</td></tr>
<tr class="separator:a8751028fa2a3bb23acc51693f47a9b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372d7c32a10225fcda5e6621c6494ad7"><td class="memItemLeft" align="right" valign="top"><a id="a372d7c32a10225fcda5e6621c6494ad7"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>run</b> ()</td></tr>
<tr class="separator:a372d7c32a10225fcda5e6621c6494ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b18ff12291b46dddca9e0a11584887d"><td class="memItemLeft" align="right" valign="top"><a id="a1b18ff12291b46dddca9e0a11584887d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>goHome</b> ()</td></tr>
<tr class="separator:a1b18ff12291b46dddca9e0a11584887d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e7c3909700d9a39fe9dad1b4f5c9d5"><td class="memItemLeft" align="right" valign="top"><a id="ae1e7c3909700d9a39fe9dad1b4f5c9d5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setMode</b> (int desired_mode)</td></tr>
<tr class="separator:ae1e7c3909700d9a39fe9dad1b4f5c9d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7afe73617f00256e49c9a3c506f481a7"><td class="memItemLeft" align="right" valign="top"><a id="a7afe73617f00256e49c9a3c506f481a7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>saveToFile</b> (std::string filename, yarp::os::Bottle &amp;b)</td></tr>
<tr class="separator:a7afe73617f00256e49c9a3c506f481a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This tests checks if the motor encoder reading are consistent with the joint encoder readings. </p>
<p>Since the two sensors may be placed in different places, with gearboxes or tendon transmissions in between, a (signed) factor is needed to convert the two measurements. The test performes a cyclic movement between two reference positions (min and max) and collects data from both the encoders during the movement. The test generates four text data files, which are subsequently opened to generate plots. In all figures the joint and motor plots need to be reasonably aligned. The four plots are: </p><ul>
<li>joint positions vs motor positions </li>
<li>joint velocities vs motor velocities </li>
<li>joint positions (numerically derived by the test) vs joint velocities (measured by the control board) </li>
<li>motor positions (numerically derived by the test) vs motor velocities (measured by the control board) The conversion formula from motor measurments (M) to joint encoder measurements (J) is the following: J = kinematic_mj * gearbox * M with kinematic_mj the joints coupling matrix and gearbox the gearbox reduction factor (e.g. 1:100)</li>
</ul>
<p>Example: testRunner v -t motorEncodersConsistency.dll -p "--robot icub --part left_arm --joints ""(0 1 2)"" --home ""(-30 30 10)"" --speed ""(20 20 20)"" --max ""(-20 40 20)"" --min ""(-40 20 0)"" --cycles 10 --tolerance 1.0 " Example: testRunner v -s "..\icub-tests\suits\encoders-icubSim.xml"</p>
<p>Check the following functions: </p><ul>
<li>IEncoders::getEncoders() </li>
<li>IEncoders::getEncoderSpeeds() </li>
<li>IEncoders::getEncoderAccelerations() </li>
<li>IMotorEncoder::getMotorEncoders() </li>
<li>IMotorEncoder::getMotorEncoderSpeeds() </li>
<li>IMotorEncoder::getMotorEncoderAccelerations() Note: Acceleration is not currently tested.</li>
</ul>
<p>Accepts the following parameters: </p><table class="doxtable">
<tr>
<th align="center">Parameter name </th><th align="center">Type </th><th align="center">Units </th><th align="center">Default Value </th><th align="center">Required </th><th align="center">Description </th><th align="center">Notes  </th></tr>
<tr>
<td align="center">robot </td><td align="center">string </td><td align="center">- </td><td align="center">- </td><td align="center">Yes </td><td align="center">The name of the robot. </td><td align="center">e.g. icub </td></tr>
<tr>
<td align="center">part </td><td align="center">string </td><td align="center">- </td><td align="center">- </td><td align="center">Yes </td><td align="center">The name of trhe robot part. </td><td align="center">e.g. left_arm </td></tr>
<tr>
<td align="center">joints </td><td align="center">vector of ints </td><td align="center">- </td><td align="center">- </td><td align="center">Yes </td><td align="center">List of joints to be tested </td><td align="center"></td></tr>
<tr>
<td align="center">home </td><td align="center">vector of doubles of size joints </td><td align="center">deg </td><td align="center">- </td><td align="center">Yes </td><td align="center">The home position for each joint </td><td align="center"></td></tr>
<tr>
<td align="center">cycles </td><td align="center">int </td><td align="center">- </td><td align="center">10 </td><td align="center">No </td><td align="center">The number of test cycles (going from max to min position and viceversa </td><td align="center"></td></tr>
<tr>
<td align="center">max </td><td align="center">vector of doubles of size joints </td><td align="center">deg </td><td align="center">- </td><td align="center">Yes </td><td align="center">The max position using during the joint movement </td><td align="center"></td></tr>
<tr>
<td align="center">min </td><td align="center">vector of doubles of size joints </td><td align="center">deg </td><td align="center">- </td><td align="center">Yes </td><td align="center">The min position using during the joint movement </td><td align="center"></td></tr>
<tr>
<td align="center">tolerance </td><td align="center">vector of doubles of size joints </td><td align="center">deg </td><td align="center">- </td><td align="center">Yes </td><td align="center">The tolerance used when moving from min to max reference position and viceversa </td><td align="center"></td></tr>
<tr>
<td align="center">speed </td><td align="center">vector of doubles of size joints </td><td align="center">deg/s </td><td align="center">- </td><td align="center">Yes </td><td align="center">The reference speed used during the movement </td><td align="center"></td></tr>
<tr>
<td align="center">matrix_size </td><td align="center">int </td><td align="center">- </td><td align="center">- </td><td align="center">Yes </td><td align="center">The number of rows of the coupling matrix </td><td align="center">Typical value = 4. </td></tr>
<tr>
<td align="center">matrix </td><td align="center">vector of doubles of size matrix_size </td><td align="center">- </td><td align="center">- </td><td align="center">Yes </td><td align="center">The kinematic_mj coupling matrix </td><td align="center">matrix is identity if joints are not coupled </td></tr>
<tr>
<td align="center">plotstring1 </td><td align="center">string </td><td align="center"></td><td align="center">- </td><td align="center">Yes </td><td align="center">The string which generates plot 1 </td><td align="center"></td></tr>
<tr>
<td align="center">plotstring2 </td><td align="center">string </td><td align="center"></td><td align="center">- </td><td align="center">Yes </td><td align="center">The string which generates plot 2 </td><td align="center"></td></tr>
<tr>
<td align="center">plotstring3 </td><td align="center">string </td><td align="center"></td><td align="center">- </td><td align="center">Yes </td><td align="center">The string which generates plot 3 </td><td align="center"></td></tr>
<tr>
<td align="center">plotstring4 </td><td align="center">string </td><td align="center"></td><td align="center">- </td><td align="center">Yes </td><td align="center">The string which generates plot 4 </td><td align="center"></td></tr>
</table>

<p>Definition at line <a class="el" href="motorEncodersConsistency_8h_source.html#l00069">69</a> of file <a class="el" href="motorEncodersConsistency_8h_source.html">motorEncodersConsistency.h</a>.</p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/dev/icub-tests/src/motorEncoders-consistency/<a class="el" href="motorEncodersConsistency_8h_source.html">motorEncodersConsistency.h</a></li>
<li>C:/dev/icub-tests/src/motorEncoders-consistency/<a class="el" href="motorEncodersConsistency_8cpp_source.html">motorEncodersConsistency.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
